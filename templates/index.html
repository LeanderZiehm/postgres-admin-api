<!DOCTYPE html>
<html>
<head>
    <title>Mini PGAdmin</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>Mini PGAdmin</h1>

    {% if message %}
        <p class="message">{{ message }}</p>
    {% endif %}

    <h2>Databases</h2>
    <form action="/select_db" method="post">
        <select name="db_name" required>
            {% for db in databases %}
                <option value="{{ db }}" {% if selected_db == db %}selected{% endif %}>{{ db }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Database</button>
    </form>

    {% if selected_db %}
        <h2>Tables in {{ selected_db }}</h2>
        <ul>
            {% for table in tables %}
                <li>{{ table }}</li>
            {% endfor %}
        </ul>

        <h2>Create Table in {{ selected_db }}</h2>
        <form action="/create_table" method="post">
            <input type="hidden" name="db_name" value="{{ selected_db }}">
            <label>Table Name:</label><br>
            <input type="text" name="table_name" required><br><br>

            <label>Columns (name:type, comma separated):</label><br>
            <input type="text" name="columns" required placeholder="id SERIAL PRIMARY KEY, name TEXT"><br><br>

            <button type="submit">Create Table</button>
        </form>
    {% endif %}
</body>
</html>
